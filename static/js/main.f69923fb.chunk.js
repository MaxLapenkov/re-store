(this["webpackJsonpre-store"]=this["webpackJsonpre-store"]||[]).push([[0],{35:function(e,t,n){},37:function(e,t,n){e.exports=n.p+"static/media/error-picture.362c250b.png"},39:function(e,t,n){e.exports=n(62)},48:function(e,t,n){},49:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"framesLoaded",(function(){return T})),n.d(a,"framesRequested",(function(){return U})),n.d(a,"framesError",(function(){return _})),n.d(a,"widthChanged",(function(){return D})),n.d(a,"heightChanged",(function(){return F})),n.d(a,"frameAddedToCart",(function(){return L})),n.d(a,"frameDeletedfromCart",(function(){return M})),n.d(a,"allFramesDeletedfromCart",(function(){return P})),n.d(a,"clearCart",(function(){return H}));var r=n(0),c=n.n(r),l=n(25),u=n.n(l),o=n(14),i=n(4),s=n(5),m=n(9),f=n(10),d=n(16),h=n(15),p=(n(48),n(37)),E=n.n(p),b=function(){return c.a.createElement("div",{className:"error-indicator"},c.a.createElement("img",{src:E.a,alt:"error-icon",width:"64"}),c.a.createElement("span",{className:"boom"},"\u0418\u0437\u0432\u0438\u043d\u0438\u0442\u0435",c.a.createElement("br",null)," \u0423 \u043d\u0430\u0441 \u0432\u043e\u0437\u043d\u0438\u043a\u043b\u0438 \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0442\u0440\u0443\u0434\u043d\u043e\u0441\u0442\u0438"),c.a.createElement("span",null,"\u0420\u0430\u0431\u043e\u0442\u0430 \u0441\u043a\u043e\u0440\u043e \u0431\u0443\u0434\u0435\u0442 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0430"))},v=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={hasError:!1},e}return Object(f.a)(n,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?c.a.createElement(b,null):this.props.children}}]),n}(r.Component),g=n(17),y=(n(49),n(2)),C=n.n(y),O=n(6),j=n(24),N=n.n(j),w=(n(53),n(55),n(56),{apiKey:"AIzaSyDekXqW0APzDphPFRKCSID_MPSIbFO3HoI",authDomain:"frameshop-6dc38.firebaseapp.com",databaseURL:"https://frameshop-6dc38.firebaseio.com",projectId:"frameshop-6dc38",storageBucket:"frameshop-6dc38.appspot.com",messagingSenderId:"1037245804641",appId:"1:1037245804641:web:72132a092bff6e5cd5fa20",measurementId:"G-8JGBKERKG6"}),k=new(function(){function e(){var t=this;Object(m.a)(this,e),this.SendInfo=function(){var e=Object(O.a)(C.a.mark((function e(n,a,r,c){var l,u,o;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.storage.ref().child("images/".concat(c)).getDownloadURL();case 2:return l=e.sent,e.next=5,t.getMaxId();case 5:return u=e.sent,e.next=8,t.getMaxId();case 8:return o=e.sent,e.next=11,t.db.collection("frames").add({key:u,id:o,name:n,color:a,price:r,width:20,height:20,image:l});case 11:return e.abrupt("return",new Promise((function(e,t){e(console.log("Document successfully sent!"))})));case 12:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),this.sendImage=function(){var e=Object(O.a)(C.a.mark((function e(n){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.storage.ref("images/"+n.name),e.next=3,a.put(n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.sendOrder=function(){var e=Object(O.a)(C.a.mark((function e(n,a,r,c,l){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.collection("orders").add({name:n,email:a,order:r,total:c,phone:l});case 2:return e.abrupt("return",new Promise((function(e,t){e(console.log("Document successfully sent!"))})));case 3:case"end":return e.stop()}}),e)})));return function(t,n,a,r,c){return e.apply(this,arguments)}}(),this.removeItem=function(){var e=Object(O.a)(C.a.mark((function e(n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.collection("frames").doc(n).delete();case 2:return e.abrupt("return",new Promise((function(e,t){e(console.log("Document successfully deleted!"))})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.removeOrder=function(){var e=Object(O.a)(C.a.mark((function e(n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.collection("orders").doc(n).delete();case 2:return e.abrupt("return",new Promise((function(e,t){e(console.log("Document successfully deleted!"))})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N.a.initializeApp(w),this.auth=N.a.auth(),this.db=N.a.firestore(),this.storage=N.a.storage()}return Object(f.a)(e,[{key:"login",value:function(e,t){return this.auth.signInWithEmailAndPassword(e,t)}},{key:"logout",value:function(){return this.auth.signOut()}},{key:"register",value:function(){var e=Object(O.a)(C.a.mark((function e(t,n,a){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.auth.createUserWithEmailAndPassword(n,a);case 2:return e.abrupt("return",this.auth.currentUser.updateProfile({displayName:t}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"sendVerification",value:function(){var e=Object(O.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.auth.currentUser,e.next=3,t.sendEmailVerification().then((function(){console.log("email-sent")})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resetPassword",value:function(){var e=Object(O.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.auth.sendPasswordResetEmail(t).then((function(){console.log("email-sent")})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isInitialized",value:function(){var e=this;return new Promise((function(t){e.auth.onAuthStateChanged(t)}))}},{key:"getCurrentUsername",value:function(){if(this.auth.currentUser)return this.auth.currentUser.displayName}},{key:"getCurrentUserEmail",value:function(){if(this.auth.currentUser)return this.auth.currentUser.email}},{key:"getCurrentUserPhone",value:function(){var e=Object(O.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.auth.currentUser){e.next=6;break}return e.next=3,this.db.doc("users-phones/".concat(this.auth.currentUser.uid)).get();case 3:if(!(t=e.sent)){e.next=6;break}return e.abrupt("return",t.get("phone"));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCurrentUserUid",value:function(){if(this.auth.currentUser)return this.auth.currentUser.uid}},{key:"getMaxOfArray",value:function(e){return Math.max.apply(null,e)}},{key:"getMaxId",value:function(){var e=Object(O.a)(C.a.mark((function e(){var t=this;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.collection("frames").get().then((function(e){var t=[];return e.forEach((function(e){t.push(e.data().id)})),t})).then((function(e){return t.getMaxOfArray(e)+1}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getFrames",value:function(){var e=Object(O.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.collection("frames").get().then((function(e){var t=[];return e.forEach((function(e){var n=e.id,a=e.data();a.key=n,t.push(a)})),t}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getOrders",value:function(){var e=Object(O.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.collection("orders").get().then((function(e){var t=[];return e.forEach((function(e){var n=e.id,a=e.data();a.key=n,t.push(a)})),t}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPhone",value:function(e){if(this.auth.currentUser)return this.db.doc("users-phones/".concat(this.auth.currentUser.uid)).set({phone:e})}}]),e}()),x=function(e){var t=e.frame,n=e.widthChanged,a=e.heightChanged,r=e.onAddedToCart,l=e.onRemoveItem,u=t.name,o=t.color,i=t.image,s=t.price,m=t.width,f=t.height,d=Math.round(m*f/100*s);return"yt22jtNlWVhf0sWJcAR3ElKHcst2"===k.getCurrentUserUid()?c.a.createElement("div",{href:"/",className:"frame-list-item"},c.a.createElement("div",{className:"frame-cover"},c.a.createElement("img",{src:i,alt:"\u0420\u0430\u043c\u043a\u0430",width:"200",height:"200"})),c.a.createElement("div",{className:"frame-description"},c.a.createElement("h3",{className:"title"},u),c.a.createElement("span",null,"\u0426\u0432\u0435\u0442: ",o),c.a.createElement("span",null,"\u0426\u0435\u043d\u0430 \u0437\u0430 \u043c\u0435\u0442\u0440: ",s," \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement("label",null,c.a.createElement("p",null,"\u0428\u0438\u0440\u0438\u043d\u0430(c\u043c):"),c.a.createElement("input",{type:"number",min:"10",minLength:"2",defaultValue:m,onChange:n})),c.a.createElement("label",null,c.a.createElement("p",null,"\u0412\u044b\u0441\u043e\u0442\u0430(c\u043c):"),c.a.createElement("input",{type:"number",min:"10",minLength:"2",defaultValue:f,onChange:a})),c.a.createElement("span",null,"\u0426\u0435\u043d\u0430: ",d),c.a.createElement("button",{className:"btn btn-info add-to-cart",onClick:r},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"),c.a.createElement("button",{className:"btn btn-danger add-to-cart",onClick:l},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"))):c.a.createElement("div",{className:"frame-list-item"},c.a.createElement("div",{className:"frame-cover"},c.a.createElement("img",{src:i,alt:"\u0420\u0430\u043c\u043a\u0430",width:"200",height:"200"})),c.a.createElement("div",{className:"frame-description"},c.a.createElement("h3",{className:"title"},u),c.a.createElement("span",null,"\u0426\u0432\u0435\u0442: ",o),c.a.createElement("span",null,"\u0426\u0435\u043d\u0430 \u0437\u0430 \u043c\u0435\u0442\u0440: ",s," \u0440\u0443\u0431\u043b\u0435\u0439"),c.a.createElement("label",null,c.a.createElement("p",null,"\u0428\u0438\u0440\u0438\u043d\u0430(c\u043c):"),c.a.createElement("input",{type:"number",min:"10",minLength:"2",defaultValue:m,onChange:n})),c.a.createElement("label",null,c.a.createElement("p",null,"\u0412\u044b\u0441\u043e\u0442\u0430(c\u043c):"),c.a.createElement("input",{type:"number",min:"10",minLength:"2",defaultValue:f,onChange:a})),c.a.createElement("span",null,"\u0426\u0435\u043d\u0430: ",d),c.a.createElement("button",{className:"btn btn-info add-to-cart",onClick:r},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443")))},A=(n(57),c.a.createContext()),S=A.Provider,I=A.Consumer,R=function(){return function(e){return function(t){return c.a.createElement(I,null,(function(n){return c.a.createElement(e,Object.assign({},t,{frameStoreService:n}))}))}}},T=function(e){return{type:"FETCH_FRAMES_SUCCESS",payload:e}},U=function(){return{type:"FETCH_FRAMES_REQUEST"}},D=function(e,t){return{type:"WIDTH_UPDATE",payload:e,width:t}},F=function(e,t){return{type:"HEIGHT_UPDATE",payload:e,height:t}},_=function(e){return{type:"FRAMES_FAILURE",payload:e}},L=function(e){return{type:"FRAME_ADDED_TO_CART",payload:e}},M=function(e){return{type:"FRAME_DELETED_FROM_CART",payload:e}},P=function(e){return{type:"ALL_FRAMES_DELETED_FROM_CART",payload:e}},H=function(){return{type:"CLEAR_CART"}},W=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduceRight((function(e,t){return t(e)}),e)}},V=(n(58),function(){return c.a.createElement("div",{className:"loadingio-spinner-spinner-kwnefvytxq8 spinner"},c.a.createElement("div",{className:"ldio-zqnhqhb31uk"},c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null)))}),K=function(e){var t=e.onSendInfo,n=Object(r.useState)(""),a=Object(s.a)(n,2),l=a[0],u=a[1],o=Object(r.useState)(""),i=Object(s.a)(o,2),m=i[0],f=i[1],d=Object(r.useState)(""),h=Object(s.a)(d,2),p=h[0],E=h[1],b=Object(r.useState)(""),v=Object(s.a)(b,2),g=v[0],y=v[1];return"yt22jtNlWVhf0sWJcAR3ElKHcst2"===k.getCurrentUserUid()?c.a.createElement("div",{className:"admin-page"},c.a.createElement("p",null,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043d\u043e\u0432\u043e\u0433\u043e \u0442\u043e\u0432\u0430\u0440\u0430"),c.a.createElement("form",{className:"form",onSubmit:function(e){return e.preventDefault()&&!1}},c.a.createElement("label",null,c.a.createElement("div",null,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),c.a.createElement("input",{id:"name",name:"name",type:"text",autoComplete:"off",autoFocus:!0,value:l,onChange:function(e){return u(e.target.value)}})),c.a.createElement("label",null,c.a.createElement("div",null,"\u0426\u0432\u0435\u0442"),c.a.createElement("input",{id:"color",name:"color",type:"text",autoComplete:"off",value:m,onChange:function(e){return f(e.target.value)}})),c.a.createElement("label",null,c.a.createElement("div",null,"\u0426\u0435\u043d\u0430 \u0437\u0430 \u043c\u0435\u0442\u0440"),c.a.createElement("input",{id:"price",name:"price",type:"number",autoComplete:"off",value:p,onChange:function(e){return E(e.target.value)}})),c.a.createElement("label",null,c.a.createElement("div",null,"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430"),c.a.createElement("input",{id:"image",name:"image",type:"file",autoComplete:"off",onChange:function(e){return y(e.target.files[0])},autoFocus:!0})),c.a.createElement("button",{className:"form-button",type:"submit",onClick:function(){return t(l,m,p,g)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"))):null},J=n(19),q=function(e){var t=e.frames,n=e.widthChanged,a=e.heightChanged,r=e.onAddedToCart,l=e.onRemoveItem,u=e.onSendInfo;return"yt22jtNlWVhf0sWJcAR3ElKHcst2"===k.getCurrentUserUid()?c.a.createElement("div",null,c.a.createElement("ul",{className:"frame-list"},t.map((function(e){return c.a.createElement("li",{key:e.key},c.a.createElement(x,{frame:e,widthChanged:function(t){return n(e.id,Number(t.target.value))},heightChanged:function(t){return a(e.id,Number(t.target.value))},onAddedToCart:function(){return r(e.id)},onRemoveItem:function(){return l(e.key)}}))}))),c.a.createElement(K,{onSendInfo:u})):c.a.createElement("ul",{className:"frame-list"},t.map((function(e){return c.a.createElement("li",{key:e.key},c.a.createElement(x,{frame:e,widthChanged:function(t){return n(e.id,Number(t.target.value))},heightChanged:function(t){return a(e.id,Number(t.target.value))},onAddedToCart:function(){return r(e.id)},onRemoveItem:function(){return l(e.key)}}))})))},z=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchFrames()}},{key:"render",value:function(){var e=this,t=this.props,n=t.frames,a=t.loading,r=t.error,l=t.widthChanged,u=t.heightChanged,o=t.onAddedToCart;return a?c.a.createElement(V,null):r?c.a.createElement(b,null):c.a.createElement(q,{frames:n,widthChanged:l,heightChanged:u,onAddedToCart:o,onRemoveItem:function(t){k.removeItem(t).then((function(){return e.props.fetchFrames()}))},onSendInfo:function(t,n,a,r){k.sendImage(r).then((function(){return k.SendInfo(t,n,a,r.name)})).then((function(){return e.props.fetchFrames()}))}})}}]),n}(r.Component),G=W(R(),Object(o.b)((function(e){var t=e.frameList;return{frames:t.frames,loading:t.loading,error:t.error}}),(function(e,t){var n=t.frameStoreService,r=Object(J.a)(a,e),c=r.framesRequested,l=r.framesLoaded,u=r.framesError;return{fetchFrames:function(){c(),n.getFrames().then((function(e){return l(e)})).catch((function(e){return u(e)}))},widthChanged:r.widthChanged,heightChanged:r.heightChanged,onAddedToCart:r.frameAddedToCart}})))(z),B=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(G,null))}}]),n}(r.Component),Q=(n(59),{onIncrease:L,onDecrease:M,onDelete:P,onClear:H}),X=Object(g.f)(Object(o.b)((function(e){var t=e.shoppingCart;return{items:t.cartItems,total:t.orderTotal}}),Q)((function(e){var t=e.items,n=e.total,a=e.onIncrease,l=e.onDecrease,u=e.onDelete,o=e.onClear,m=e.history,f=k.getCurrentUserEmail(),d=k.getCurrentUsername(),h=Object(r.useState)(""),p=Object(s.a)(h,2),E=p[0],b=p[1];Object(r.useEffect)((function(){k.getCurrentUserPhone().then((function(e){b(e||"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d")}))}));var v=function(e,t){var n=e.id,r=e.name,o=e.width,i=e.height,s=e.count,m=e.total;return c.a.createElement("tr",{key:n},c.a.createElement("td",null,t+1),c.a.createElement("td",null,r),c.a.createElement("td",null,o),c.a.createElement("td",null,i),c.a.createElement("td",null,s),c.a.createElement("td",null,m," \u0420."),c.a.createElement("td",null,c.a.createElement("button",{className:"btn btn-outline-danger btn-sm",onClick:function(){return u(n)}},c.a.createElement("i",{className:"fa fa-trash-o"})),c.a.createElement("button",{className:"btn btn-outline-success btn-sm",onClick:function(){return a(n)}},c.a.createElement("i",{className:"fa fa-plus-circle"})),c.a.createElement("button",{className:"btn btn-outline-warning btn-sm",onClick:function(){return l(n)}},c.a.createElement("i",{className:"fa fa-minus-circle"}))))};return k.getCurrentUsername()?c.a.createElement("div",{className:"shopping-cart-table"},c.a.createElement("h2",null,"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437"),c.a.createElement("table",{className:"table table-responsive-sm"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"#"),c.a.createElement("th",null,"\u041f\u0440\u0435\u0434\u043c\u0435\u0442"),c.a.createElement("th",null,"\u0428\u0438\u0440\u0438\u043d\u0430"),c.a.createElement("th",null,"\u0412\u044b\u0441\u043e\u0442\u0430"),c.a.createElement("th",null,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),c.a.createElement("th",null,"\u0426\u0435\u043d\u0430"),c.a.createElement("th",null,"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435"))),c.a.createElement("tbody",null,t.map(v))),c.a.createElement("button",{className:"btn btn-primary btn-large",type:"submit",onClick:function(){t.length>=1&&(k.sendOrder(d,f,t,n,E),o(),m.replace("/success"))}},"\u0417\u0430\u043a\u0430\u0437\u0430\u0442\u044c"),c.a.createElement("div",{className:"total"},"\u0421\u0443\u043c\u043c\u0430: ",n," \u0420.")):c.a.createElement("div",{className:"shopping-cart-table"},c.a.createElement("h2",null,"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437"),c.a.createElement("table",{className:"table table-responsive-sm"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"#"),c.a.createElement("th",null,"\u041f\u0440\u0435\u0434\u043c\u0435\u0442"),c.a.createElement("th",null,"\u0428\u0438\u0440\u0438\u043d\u0430"),c.a.createElement("th",null,"\u0412\u044b\u0441\u043e\u0442\u0430"),c.a.createElement("th",null,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),c.a.createElement("th",null,"\u0426\u0435\u043d\u0430"),c.a.createElement("th",null,"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435"))),c.a.createElement("tbody",null,t.map(v))),c.a.createElement(i.b,{className:"btn btn-primary btn-large",to:"/login"},"\u0417\u0430\u043a\u0430\u0437\u0430\u0442\u044c"),c.a.createElement("div",{className:"total"},"\u0421\u0443\u043c\u043c\u0430: ",n," \u0420."))}))),Y=function(){return k.getCurrentUsername()?c.a.createElement("div",null,c.a.createElement("h2",null,"\u0417\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0439\u0442\u0435, ",k.getCurrentUsername()),c.a.createElement(X,null)):c.a.createElement(X,null)},Z=(n(35),Object(g.f)((function(e){var t=Object(r.useState)(""),n=Object(s.a)(t,2),a=n[0],l=n[1],u=Object(r.useState)(""),o=Object(s.a)(u,2),m=o[0],f=o[1],d=Object(r.useState)("form"),h=Object(s.a)(d,2),p=h[0],E=h[1];return c.a.createElement("div",{className:"login-page"},c.a.createElement("h2",{className:"form-header"},"\u0412\u0445\u043e\u0434"),c.a.createElement("form",{className:p,onSubmit:function(e){return e.preventDefault()&&!1}},c.a.createElement("label",{className:"form-field"},c.a.createElement("div",null,"E-mail"),c.a.createElement("input",{id:"e-mail",name:"e-mail",autoComplete:"off",autoFocus:!0,type:"text",value:a,onChange:function(e){return l(e.target.value)}})),c.a.createElement("label",{className:"form-field"},c.a.createElement("div",null,"\u041f\u0430\u0440\u043e\u043b\u044c"),c.a.createElement("input",{id:"password",name:"password",autoComplete:"off",type:"password",value:m,onChange:function(e){return f(e.target.value)}})),c.a.createElement("div",{className:"form-field"},c.a.createElement("button",{className:"form-button",type:"submit",onClick:function(){return b.apply(this,arguments)}},"\u0412\u043e\u0439\u0442\u0438"),c.a.createElement(i.b,{to:"/reset",className:"form-button"},"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"),c.a.createElement(i.b,{to:"/register",className:"form-button"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))));function b(){return(b=Object(O.a)(C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.login(a,m);case 3:e.history.replace("/cart"),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),"auth/invalid-email"===t.t0.code&&E("form alert");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))).apply(this,arguments)}}))),$=Object(g.f)((function(e){var t=Object(r.useState)(""),n=Object(s.a)(t,2),a=n[0],l=n[1],u=Object(r.useState)(""),o=Object(s.a)(u,2),m=o[0],f=o[1],d=Object(r.useState)(""),h=Object(s.a)(d,2),p=h[0],E=h[1],b=Object(r.useState)(""),v=Object(s.a)(b,2),g=v[0],y=v[1];return console.log(g),c.a.createElement("div",{className:"login-page"},c.a.createElement("h2",{className:"form-header"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),c.a.createElement("form",{className:"form",onSubmit:function(e){return e.preventDefault()&&!1}},c.a.createElement("label",{className:"form-field"},c.a.createElement("div",null,"\u0418\u043c\u044f"),c.a.createElement("input",{id:"name",name:"name",autoComplete:"off",autoFocus:!0,value:a,onChange:function(e){return l(e.target.value)}})),c.a.createElement("label",{className:"form-field"},c.a.createElement("div",null,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"),c.a.createElement("input",{id:"phone",name:"phone",autoComplete:"off",value:g,onChange:function(e){return y(e.target.value)}})),c.a.createElement("label",{className:"form-field"},c.a.createElement("div",null,"E-mail"),c.a.createElement("input",{id:"e-mail",name:"e-mail",autoComplete:"off",value:p,onChange:function(e){return E(e.target.value)}})),c.a.createElement("label",{className:"form-field"},c.a.createElement("div",null,"\u041f\u0430\u0440\u043e\u043b\u044c"),c.a.createElement("input",{id:"password",name:"password",autoComplete:"off",value:m,onChange:function(e){return f(e.target.value)}})),c.a.createElement("div",{className:"form-field"},c.a.createElement("button",{className:"form-button",type:"submit",onClick:function(){return j.apply(this,arguments)}},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"),c.a.createElement(i.b,{to:"/login",className:"form-button"},"\u0412\u043e\u0439\u0442\u0438"))));function j(){return(j=Object(O.a)(C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.register(a,p,m);case 3:return t.next=5,k.setPhone(g);case 5:return t.next=7,k.sendVerification();case 7:e.history.replace("/cart"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),alert(t.t0.message);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))).apply(this,arguments)}})),ee=function(){return c.a.createElement("h2",null,"\u0417\u0430\u043a\u0430\u0437 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d")},te=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).onDelete=function(t){k.removeOrder(t).then((function(){return e.setState({loading:!0})})).then((function(){return k.getOrders().then((function(t){return e.setState({orders:t,loading:!1})}))}))},e.state={orders:[],loading:!0},e.renderItems=function(e){var t=e.id*e.width*e.height*e.price*Math.floor(1e3*Math.random());return c.a.createElement("table",{key:t+1},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),c.a.createElement("th",null,"\u0428\u0438\u0440\u0438\u043d\u0430"),c.a.createElement("th",null,"\u0412\u044b\u0441\u043e\u0442\u0430"),c.a.createElement("th",null,"\u041a\u043e\u043b\u0438\u0447\u0435c\u0442\u0432\u043e"),c.a.createElement("th",null,"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c"))),c.a.createElement("tbody",null,c.a.createElement("tr",{key:t},c.a.createElement("td",null,e.name),c.a.createElement("td",null,e.width),c.a.createElement("td",null,e.height),c.a.createElement("td",null,e.count),c.a.createElement("td",null,e.total))))},e.renderRow=function(t){var n=t.key,a=t.name,r=t.email,l=t.order,u=t.total,o=t.phone,i=void 0===o?"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d":o;return c.a.createElement("tr",{key:n},c.a.createElement("td",null,a),c.a.createElement("td",null,r),c.a.createElement("td",null,i),c.a.createElement("td",null,l.map(e.renderItems)),c.a.createElement("td",null,u),c.a.createElement("td",null,c.a.createElement("button",{onClick:function(){return e.onDelete(n)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))},e}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=this;k.getOrders().then((function(t){return e.setState({orders:t,loading:!1})}))}},{key:"render",value:function(){var e=this.state.orders;return this.state.loading?c.a.createElement(V,null):"yt22jtNlWVhf0sWJcAR3ElKHcst2"===k.getCurrentUserUid()?c.a.createElement("table",{className:"table table-responsive-sm"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"\u0418\u043c\u044f"),c.a.createElement("th",null,"E-mail"),c.a.createElement("th",null,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"),c.a.createElement("th",null,"\u0417\u0430\u043a\u0430\u0437"),c.a.createElement("th",null,"\u0421\u0443\u043c\u043c\u0430"))),c.a.createElement("tbody",null,e.map(this.renderRow))):c.a.createElement(i.b,{to:"login",className:"btn btn-primary btn-large"},"\u0417\u0430\u043b\u043e\u0433\u0438\u043d\u0438\u0442\u044c\u0441\u044f")}}]),n}(r.Component),ne=function(){var e=Object(r.useState)(""),t=Object(s.a)(e,2),n=t[0],a=t[1],l=Object(r.useState)("\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"),u=Object(s.a)(l,2),o=u[0],i=u[1];function m(){return(m=Object(O.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.resetPassword(t).then((function(){return i("\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e \u043d\u0430 e-mail")}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return c.a.createElement("div",{className:"login-page"},c.a.createElement("h2",{className:"form-header"},o),c.a.createElement("form",{className:"form",onSubmit:function(e){return e.preventDefault()&&!1}},c.a.createElement("label",{className:"form-field"},c.a.createElement("div",null,"E-mail"),c.a.createElement("input",{id:"e-mail",name:"e-mail",autoComplete:"off",autoFocus:!0,value:n,onChange:function(e){return a(e.target.value)}})),c.a.createElement("div",{className:"form-field"},c.a.createElement("button",{className:"form-button",type:"submit",onClick:function(){return function(e){return m.apply(this,arguments)}(n)}},"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"))))},ae=(n(61),Object(g.f)((function(e){var t=e.numItems,n=e.total;return k.getCurrentUsername()?"yt22jtNlWVhf0sWJcAR3ElKHcst2"===k.getCurrentUserUid()?c.a.createElement("header",{className:"shop-header row"},c.a.createElement(i.b,{className:"logo text-dark",to:"/re-store"},"ReStore"),c.a.createElement(i.b,{to:"/cart",className:"shopping-cart"},c.a.createElement("i",{className:"cart-icon fa fa-shopping-cart"}),t," \u041f\u0440\u0435\u0434\u043c\u0435\u0442\u043e\u0432 (",n," \u0420.)"),c.a.createElement("div",{className:"additional-pages"},c.a.createElement(i.b,{to:"/orders"},"\u0417\u0430\u043a\u0430\u0437\u044b"),c.a.createElement("button",{className:"logout",onClick:a,type:"submit"},"\u0412\u044b\u0439\u0442\u0438"))):c.a.createElement("header",{className:"shop-header row"},c.a.createElement(i.b,{className:"logo text-dark",to:"/re-store"},"ReStore"),c.a.createElement(i.b,{to:"/cart",className:"shopping-cart"},c.a.createElement("i",{className:"cart-icon fa fa-shopping-cart"}),t," \u041f\u0440\u0435\u0434\u043c\u0435\u0442\u043e\u0432 (",n," \u0420.)"),c.a.createElement("div",{className:"additional-pages"},c.a.createElement("button",{className:"logout",onClick:a,type:"submit"},"\u0412\u044b\u0439\u0442\u0438"))):c.a.createElement("header",{className:"shop-header row"},c.a.createElement(i.b,{className:"logo text-dark",to:"/re-store"},"FrameStore"),c.a.createElement(i.b,{to:"/cart",className:"shopping-cart"},c.a.createElement("i",{className:"cart-icon fa fa-shopping-cart"}),t," \u041f\u0440\u0435\u0434\u043c\u0435\u0442\u043e\u0432 (",n," \u0420.)"),c.a.createElement("div",{className:"additional-pages"},c.a.createElement(i.b,{to:"/login"},"\u0412\u043e\u0439\u0442\u0438"),c.a.createElement(i.b,{to:"/register"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")));function a(){return r.apply(this,arguments)}function r(){return(r=Object(O.a)(C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.logout();case 2:e.history.push("/re-store");case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}))),re=Object(o.b)((function(e){var t=e.shoppingCart;return{orderTotal:t.orderTotal,cartItemsTotal:t.cartItemsTotal}}))((function(e){var t=e.orderTotal,n=e.cartItemsTotal,a=Object(r.useState)(!1),l=Object(s.a)(a,2),u=l[0],o=l[1];return Object(r.useEffect)((function(){k.isInitialized().then((function(e){o(e)}))})),!1!==u?c.a.createElement("main",{role:"main",className:"container"},c.a.createElement(ae,{numItems:n,total:t}),c.a.createElement(v,null,c.a.createElement(g.c,null,c.a.createElement(g.a,{path:"/re-store",component:B}),c.a.createElement(g.a,{path:"/cart",component:Y}),c.a.createElement(g.a,{path:"/login",component:Z}),c.a.createElement(g.a,{path:"/register",component:$}),c.a.createElement(g.a,{path:"/success",component:ee}),c.a.createElement(g.a,{path:"/orders",component:te}),c.a.createElement(g.a,{path:"/reset",component:ne})))):c.a.createElement(V,null)})),ce=function(){function e(){Object(m.a)(this,e)}return Object(f.a)(e,[{key:"getFrames",value:function(){return k.getFrames()}}]),e}(),le=n(12),ue=n(23),oe=function(e,t){if(void 0===e)return{frames:[],loading:!0,error:null};var n=t.payload,a=e.frameList.frames.findIndex((function(e){return e.id===n})),r=e.frameList.frames[a],c=t.height,l=t.width;switch(t.type){case"FETCH_FRAMES_REQUEST":return{frames:[],loading:!0,error:null};case"FETCH_FRAMES_SUCCESS":return{frames:t.payload,loading:!1,error:null};case"FETCH_FRAMES_FAILURE":return{frames:[],loading:!1,error:t.payload};case"HEIGHT_UPDATE":var u=Object(ue.a)({},r,{height:c,id:r.id+1e3});return{frames:[].concat(Object(le.a)(e.frameList.frames.slice(0,a)),[u],Object(le.a)(e.frameList.frames.slice(a+1)))};case"WIDTH_UPDATE":var o=Object(ue.a)({},r,{width:l,id:r.id+1e3});return{frames:[].concat(Object(le.a)(e.frameList.frames.slice(0,a)),[o],Object(le.a)(e.frameList.frames.slice(a+1)))};default:return e.frameList}},ie=function(e,t,n){var a=e.frameList.frames,r=e.shoppingCart.cartItems,c=a.find((function(e){return e.id===t})),l=r.findIndex((function(e){return e.id===t})),u=function(e,t,n){return 0===t.count?[].concat(Object(le.a)(e.slice(0,n)),Object(le.a)(e.slice(n+1))):-1===n?[].concat(Object(le.a)(e),[t]):[].concat(Object(le.a)(e.slice(0,n)),[t],Object(le.a)(e.slice(n+1)))}(r,function(e,t,n){return t?Object(ue.a)({},t,{count:t.count+n,total:t.total+n*Math.round(t.width*t.height*t.price/100)}):{id:e.id,name:e.name,count:1,width:e.width,height:e.height,total:Math.round(e.width*e.height*e.price/100),price:e.price}}(c,r[l],n),l);return{orderTotal:Object.values(u).reduce((function(e,t){return e+t.total}),0),cartItems:u,cartItemsTotal:Object.values(u).reduce((function(e,t){return e+t.count}),0)}},se=function(e,t){if(void 0===e)return{cartItems:[],orderTotal:0,cartItemsTotal:0};switch(t.type){case"FRAME_ADDED_TO_CART":return ie(e,t.payload,1);case"FRAME_DELETED_FROM_CART":return ie(e,t.payload,-1);case"ALL_FRAMES_DELETED_FROM_CART":var n=e.shoppingCart.cartItems.find((function(e){return e.id===t.payload}));return ie(e,t.payload,-n.count);case"CLEAR_CART":return{orderTotal:0,cartItems:[],cartItemsTotal:0};default:return e.shoppingCart}},me=function(e,t){return{frameList:oe(e,t),shoppingCart:se(e,t)}},fe=Object(J.b)(me),de=new ce;u.a.render(c.a.createElement(o.a,{store:fe},c.a.createElement(v,null,c.a.createElement(S,{value:de},c.a.createElement(i.a,null,c.a.createElement(re,null))))),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.f69923fb.chunk.js.map