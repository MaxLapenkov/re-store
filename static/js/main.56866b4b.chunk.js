(this["webpackJsonpre-store"]=this["webpackJsonpre-store"]||[]).push([[0],{35:function(e,t,a){},37:function(e,t,a){e.exports=a.p+"static/media/error-picture.362c250b.png"},39:function(e,t,a){e.exports=a(61)},48:function(e,t,a){},49:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"framesLoaded",(function(){return x})),a.d(n,"framesRequested",(function(){return D})),a.d(n,"framesError",(function(){return _})),a.d(n,"widthChanged",(function(){return U})),a.d(n,"heightChanged",(function(){return F})),a.d(n,"frameAddedToCart",(function(){return M})),a.d(n,"frameDeletedfromCart",(function(){return L})),a.d(n,"allFramesDeletedfromCart",(function(){return H})),a.d(n,"clearCart",(function(){return P}));var r=a(0),l=a.n(r),c=a(24),u=a.n(c),o=a(14),i=a(4),s=a(6),m=a(9),d=a(10),f=a(16),h=a(15),E=(a(48),a(37)),p=a.n(E),b=function(){return l.a.createElement("div",{className:"error-indicator"},l.a.createElement("img",{src:p.a,alt:"error-icon",width:"64"}),l.a.createElement("span",{className:"boom"},"\u0418\u0437\u0432\u0438\u043d\u0438\u0442\u0435",l.a.createElement("br",null)," \u0423 \u043d\u0430\u0441 \u0432\u043e\u0437\u043d\u0438\u043a\u043b\u0438 \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0442\u0440\u0443\u0434\u043d\u043e\u0441\u0442\u0438"),l.a.createElement("span",null,"\u0420\u0430\u0431\u043e\u0442\u0430 \u0441\u043a\u043e\u0440\u043e \u0431\u0443\u0434\u0435\u0442 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0430"))},v=function(e){Object(f.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={hasError:!1},e}return Object(d.a)(a,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?l.a.createElement(b,null):this.props.children}}]),a}(r.Component),g=a(17),y=(a(49),a(3)),C=a.n(y),O=a(5),j=a(27),N=a.n(j),w=(a(53),a(55),{apiKey:"AIzaSyDekXqW0APzDphPFRKCSID_MPSIbFO3HoI",authDomain:"frameshop-6dc38.firebaseapp.com",databaseURL:"https://frameshop-6dc38.firebaseio.com",projectId:"frameshop-6dc38",storageBucket:"frameshop-6dc38.appspot.com",messagingSenderId:"1037245804641",appId:"1:1037245804641:web:72132a092bff6e5cd5fa20",measurementId:"G-8JGBKERKG6"}),k=new(function(){function e(){var t=this;Object(m.a)(this,e),this.SendInfo=function(){var e=Object(O.a)(C.a.mark((function e(a,n,r,l){var c,u;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getMaxId();case 2:return c=e.sent,e.next=5,t.getMaxId();case 5:return u=e.sent,e.next=8,t.db.collection("frames").add({key:c,id:u,name:a,color:n,price:r,width:20,height:20,image:l});case 8:return e.abrupt("return",new Promise((function(e,t){e(console.log("Document successfully sent!"))})));case 9:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),this.sendOrder=function(){var e=Object(O.a)(C.a.mark((function e(a,n,r,l){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.collection("orders").add({name:a,email:n,order:r,total:l});case 2:return e.abrupt("return",new Promise((function(e,t){e(console.log("Document successfully sent!"))})));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),this.removeItem=function(){var e=Object(O.a)(C.a.mark((function e(a){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.collection("frames").doc(a).delete();case 2:return e.abrupt("return",new Promise((function(e,t){e(console.log("Document successfully deleted!"))})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.removeOrder=function(){var e=Object(O.a)(C.a.mark((function e(a){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.collection("orders").doc(a).delete();case 2:return e.abrupt("return",new Promise((function(e,t){e(console.log("Document successfully deleted!"))})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N.a.initializeApp(w),this.auth=N.a.auth(),this.db=N.a.firestore()}return Object(d.a)(e,[{key:"login",value:function(e,t){return this.auth.signInWithEmailAndPassword(e,t)}},{key:"logout",value:function(){return this.auth.signOut()}},{key:"register",value:function(){var e=Object(O.a)(C.a.mark((function e(t,a,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.auth.createUserWithEmailAndPassword(a,n);case 2:return e.abrupt("return",this.auth.currentUser.updateProfile({displayName:t}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"isInitialized",value:function(){var e=this;return new Promise((function(t){e.auth.onAuthStateChanged(t)}))}},{key:"getCurrentUsername",value:function(){if(this.auth.currentUser)return this.auth.currentUser.displayName}},{key:"getCurrentUserEmail",value:function(){if(this.auth.currentUser)return this.auth.currentUser.email}},{key:"getCurrentUserUid",value:function(){if(this.auth.currentUser)return this.auth.currentUser.uid}},{key:"getMaxOfArray",value:function(e){return Math.max.apply(null,e)}},{key:"getMaxId",value:function(){var e=Object(O.a)(C.a.mark((function e(){var t=this;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.collection("frames").get().then((function(e){var t=[];return e.forEach((function(e){t.push(e.data().id)})),t})).then((function(e){return t.getMaxOfArray(e)+1}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getFrames",value:function(){var e=Object(O.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.collection("frames").get().then((function(e){var t=[];return e.forEach((function(e){var a=e.id,n=e.data();n.key=a,t.push(n)})),t}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getOrders",value:function(){var e=Object(O.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.collection("orders").get().then((function(e){var t=[];return e.forEach((function(e){var a=e.id,n=e.data();n.key=a,t.push(n)})),t}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}()),A=function(e){var t=e.frame,a=e.widthChanged,n=e.heightChanged,r=e.onAddedToCart,c=e.onRemoveItem,u=t.name,o=t.color,i=t.image,s=t.price,m=t.width,d=t.height,f=Math.round(m*d/100*s);return"yt22jtNlWVhf0sWJcAR3ElKHcst2"===k.getCurrentUserUid()?l.a.createElement("div",{href:"/",className:"frame-list-item"},l.a.createElement("div",{className:"frame-cover"},l.a.createElement("img",{src:i,alt:"\u0420\u0430\u043c\u043a\u0430",width:"200",height:"200"})),l.a.createElement("div",{className:"frame-description"},l.a.createElement("h3",{className:"title"},u),l.a.createElement("span",null,"\u0426\u0432\u0435\u0442: ",o),l.a.createElement("span",null,"\u0426\u0435\u043d\u0430 \u0437\u0430 \u043c\u0435\u0442\u0440: ",s," \u0440\u0443\u0431\u043b\u0435\u0439"),l.a.createElement("label",null,l.a.createElement("p",null,"\u0428\u0438\u0440\u0438\u043d\u0430(c\u043c):"),l.a.createElement("input",{type:"number",min:"10",minLength:"2",defaultValue:m,onChange:a})),l.a.createElement("label",null,l.a.createElement("p",null,"\u0412\u044b\u0441\u043e\u0442\u0430(c\u043c):"),l.a.createElement("input",{type:"number",min:"10",minLength:"2",defaultValue:d,onChange:n})),l.a.createElement("span",null,"\u0426\u0435\u043d\u0430: ",f),l.a.createElement("button",{className:"btn btn-info add-to-cart",onClick:r},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"),l.a.createElement("button",{className:"btn btn-danger add-to-cart",onClick:c},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"))):l.a.createElement("div",{href:"/",className:"frame-list-item"},l.a.createElement("div",{className:"frame-cover"},l.a.createElement("img",{src:i,alt:"\u0420\u0430\u043c\u043a\u0430",width:"200",height:"200"})),l.a.createElement("div",{className:"frame-description"},l.a.createElement("h3",{className:"title"},u),l.a.createElement("span",null,"\u0426\u0432\u0435\u0442: ",o),l.a.createElement("span",null,"\u0426\u0435\u043d\u0430 \u0437\u0430 \u043c\u0435\u0442\u0440: ",s," \u0440\u0443\u0431\u043b\u0435\u0439"),l.a.createElement("label",null,l.a.createElement("p",null,"\u0428\u0438\u0440\u0438\u043d\u0430(c\u043c):"),l.a.createElement("input",{type:"number",min:"10",minLength:"2",defaultValue:m,onChange:a})),l.a.createElement("label",null,l.a.createElement("p",null,"\u0412\u044b\u0441\u043e\u0442\u0430(c\u043c):"),l.a.createElement("input",{type:"number",min:"10",minLength:"2",defaultValue:d,onChange:n})),l.a.createElement("span",null,"\u0426\u0435\u043d\u0430: ",f),l.a.createElement("button",{className:"btn btn-info add-to-cart",onClick:r},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443")))},I=(a(56),l.a.createContext()),R=I.Provider,S=I.Consumer,T=function(){return function(e){return function(t){return l.a.createElement(S,null,(function(a){return l.a.createElement(e,Object.assign({},t,{frameStoreService:a}))}))}}},x=function(e){return{type:"FETCH_FRAMES_SUCCESS",payload:e}},D=function(){return{type:"FETCH_FRAMES_REQUEST"}},U=function(e,t){return{type:"WIDTH_UPDATE",payload:e,width:t}},F=function(e,t){return{type:"HEIGHT_UPDATE",payload:e,height:t}},_=function(e){return{type:"FRAMES_FAILURE",payload:e}},M=function(e){return{type:"FRAME_ADDED_TO_CART",payload:e}},L=function(e){return{type:"FRAME_DELETED_FROM_CART",payload:e}},H=function(e){return{type:"ALL_FRAMES_DELETED_FROM_CART",payload:e}},P=function(){return{type:"CLEAR_CART"}},W=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){return t.reduceRight((function(e,t){return t(e)}),e)}},K=(a(57),function(){return l.a.createElement("div",{className:"loadingio-spinner-spinner-kwnefvytxq8 spinner"},l.a.createElement("div",{className:"ldio-zqnhqhb31uk"},l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null)))}),V=function(e){var t=e.onSendInfo,a=Object(r.useState)(""),n=Object(s.a)(a,2),c=n[0],u=n[1],o=Object(r.useState)(""),i=Object(s.a)(o,2),m=i[0],d=i[1],f=Object(r.useState)(""),h=Object(s.a)(f,2),E=h[0],p=h[1],b=Object(r.useState)(""),v=Object(s.a)(b,2),g=v[0],y=v[1];return"yt22jtNlWVhf0sWJcAR3ElKHcst2"===k.getCurrentUserUid()?l.a.createElement("div",{className:"admin-page"},l.a.createElement("p",null,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043d\u043e\u0432\u043e\u0433\u043e \u0442\u043e\u0432\u0430\u0440\u0430"),l.a.createElement("form",{className:"form",onSubmit:function(e){return e.preventDefault()&&!1}},l.a.createElement("label",null,l.a.createElement("div",null,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),l.a.createElement("input",{id:"name",name:"name",type:"text",autoComplete:"off",autoFocus:!0,value:c,onChange:function(e){return u(e.target.value)}})),l.a.createElement("label",null,l.a.createElement("div",null,"\u0426\u0432\u0435\u0442"),l.a.createElement("input",{id:"color",name:"color",type:"text",autoComplete:"off",value:m,onChange:function(e){return d(e.target.value)}})),l.a.createElement("label",null,l.a.createElement("div",null,"\u0426\u0435\u043d\u0430 \u0437\u0430 \u043c\u0435\u0442\u0440"),l.a.createElement("input",{id:"price",name:"price",type:"number",autoComplete:"off",value:E,onChange:function(e){return p(e.target.value)}})),l.a.createElement("label",null,l.a.createElement("div",null,"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430"),l.a.createElement("input",{id:"image",name:"image",type:"text",autoComplete:"off",value:g,onChange:function(e){return y(e.target.value)},autoFocus:!0})),l.a.createElement("button",{className:"form-button",type:"submit",onClick:function(){return t(c,m,E,g)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"))):null},J=a(19),q=function(e){var t=e.frames,a=e.widthChanged,n=e.heightChanged,r=e.onAddedToCart,c=e.onRemoveItem,u=e.onSendInfo;return"yt22jtNlWVhf0sWJcAR3ElKHcst2"===k.getCurrentUserUid()?l.a.createElement("div",null,l.a.createElement("ul",{className:"frame-list"},t.map((function(e){return l.a.createElement("li",{key:e.key},l.a.createElement(A,{frame:e,widthChanged:function(t){return a(e.id,Number(t.target.value))},heightChanged:function(t){return n(e.id,Number(t.target.value))},onAddedToCart:function(){return r(e.id)},onRemoveItem:function(){return c(e.key)}}))}))),l.a.createElement(V,{onSendInfo:u})):l.a.createElement("ul",{className:"frame-list"},t.map((function(e){return l.a.createElement("li",{key:e.key},l.a.createElement(A,{frame:e,widthChanged:function(t){return a(e.id,Number(t.target.value))},heightChanged:function(t){return n(e.id,Number(t.target.value))},onAddedToCart:function(){return r(e.id)},onRemoveItem:function(){return c(e.key)}}))})))},z=function(e){Object(f.a)(a,e);var t=Object(h.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchFrames()}},{key:"render",value:function(){var e=this,t=this.props,a=t.frames,n=t.loading,r=t.error,c=t.widthChanged,u=t.heightChanged,o=t.onAddedToCart;return n?l.a.createElement(K,null):r?l.a.createElement(b,null):l.a.createElement(q,{frames:a,widthChanged:c,heightChanged:u,onAddedToCart:o,onRemoveItem:function(t){k.removeItem(t).then((function(){return e.props.fetchFrames()}))},onSendInfo:function(t,a,n,r){k.SendInfo(t,a,n,r).then((function(){return e.props.fetchFrames()}))}})}}]),a}(r.Component),G=W(T(),Object(o.b)((function(e){var t=e.frameList;return{frames:t.frames,loading:t.loading,error:t.error}}),(function(e,t){var a=t.frameStoreService,r=Object(J.a)(n,e),l=r.framesRequested,c=r.framesLoaded,u=r.framesError;return{fetchFrames:function(){l(),a.getFrames().then((function(e){return c(e)})).catch((function(e){return u(e)}))},widthChanged:r.widthChanged,heightChanged:r.heightChanged,onAddedToCart:r.frameAddedToCart}})))(z),B=function(e){Object(f.a)(a,e);var t=Object(h.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(G,null))}}]),a}(r.Component),Q=(a(58),{onIncrease:M,onDecrease:L,onDelete:H,onClear:P}),X=Object(g.f)(Object(o.b)((function(e){var t=e.shoppingCart;return{items:t.cartItems,total:t.orderTotal}}),Q)((function(e){var t=e.items,a=e.total,n=e.onIncrease,r=e.onDecrease,c=e.onDelete,u=e.onClear,o=e.history,s=k.getCurrentUserEmail(),m=k.getCurrentUsername(),d=function(e,t){var a=e.id,u=e.name,o=e.width,i=e.height,s=e.count,m=e.total;return l.a.createElement("tr",{key:a},l.a.createElement("td",null,t+1),l.a.createElement("td",null,u),l.a.createElement("td",null,o),l.a.createElement("td",null,i),l.a.createElement("td",null,s),l.a.createElement("td",null,m," \u0420."),l.a.createElement("td",null,l.a.createElement("button",{className:"btn btn-outline-danger btn-sm",onClick:function(){return c(a)}},l.a.createElement("i",{className:"fa fa-trash-o"})),l.a.createElement("button",{className:"btn btn-outline-success btn-sm",onClick:function(){return n(a)}},l.a.createElement("i",{className:"fa fa-plus-circle"})),l.a.createElement("button",{className:"btn btn-outline-warning btn-sm",onClick:function(){return r(a)}},l.a.createElement("i",{className:"fa fa-minus-circle"}))))};return k.getCurrentUsername()?l.a.createElement("div",{className:"shopping-cart-table"},l.a.createElement("h2",null,"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437"),l.a.createElement("table",{className:"table table-responsive-sm"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"#"),l.a.createElement("th",null,"\u041f\u0440\u0435\u0434\u043c\u0435\u0442"),l.a.createElement("th",null,"\u0428\u0438\u0440\u0438\u043d\u0430"),l.a.createElement("th",null,"\u0412\u044b\u0441\u043e\u0442\u0430"),l.a.createElement("th",null,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),l.a.createElement("th",null,"\u0426\u0435\u043d\u0430"),l.a.createElement("th",null,"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435"))),l.a.createElement("tbody",null,t.map(d))),l.a.createElement("button",{className:"btn btn-primary btn-large",type:"submit",onClick:function(){t.length>=1&&(k.sendOrder(m,s,t,a),u(),o.replace("/success"))}},"\u0417\u0430\u043a\u0430\u0437\u0430\u0442\u044c"),l.a.createElement("div",{className:"total"},"\u0421\u0443\u043c\u043c\u0430: ",a," \u0420.")):l.a.createElement("div",{className:"shopping-cart-table"},l.a.createElement("h2",null,"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437"),l.a.createElement("table",{className:"table table-responsive-sm"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"#"),l.a.createElement("th",null,"\u041f\u0440\u0435\u0434\u043c\u0435\u0442"),l.a.createElement("th",null,"\u0428\u0438\u0440\u0438\u043d\u0430"),l.a.createElement("th",null,"\u0412\u044b\u0441\u043e\u0442\u0430"),l.a.createElement("th",null,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"),l.a.createElement("th",null,"\u0426\u0435\u043d\u0430"),l.a.createElement("th",null,"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435"))),l.a.createElement("tbody",null,t.map(d))),l.a.createElement(i.b,{className:"btn btn-primary btn-large",to:"/login"},"\u0417\u0430\u043a\u0430\u0437\u0430\u0442\u044c"),l.a.createElement("div",{className:"total"},"\u0421\u0443\u043c\u043c\u0430: ",a," \u0420."))}))),Y=function(){return k.getCurrentUsername()?l.a.createElement("div",null,l.a.createElement("h2",null,"\u0417\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0439\u0442\u0435, ",k.getCurrentUsername()),l.a.createElement(X,null)):l.a.createElement(X,null)},Z=(a(35),Object(g.f)((function(e){var t=Object(r.useState)(""),a=Object(s.a)(t,2),n=a[0],c=a[1],u=Object(r.useState)(""),o=Object(s.a)(u,2),m=o[0],d=o[1],f=Object(r.useState)("form"),h=Object(s.a)(f,2),E=h[0],p=h[1];return l.a.createElement("div",{className:"login-page"},l.a.createElement("h2",{className:"form-header"},"\u0412\u0445\u043e\u0434"),l.a.createElement("form",{className:E,onSubmit:function(e){return e.preventDefault()&&!1}},l.a.createElement("label",{className:"form-field"},l.a.createElement("div",null,"E-mail"),l.a.createElement("input",{id:"e-mail",name:"e-mail",autoComplete:"off",autoFocus:!0,value:n,onChange:function(e){return c(e.target.value)}})),l.a.createElement("label",{className:"form-field"},l.a.createElement("div",null,"\u041f\u0430\u0440\u043e\u043b\u044c"),l.a.createElement("input",{id:"password",name:"password",autoComplete:"off",value:m,onChange:function(e){return d(e.target.value)}})),l.a.createElement("div",{className:"form-field"},l.a.createElement("button",{className:"form-button",type:"submit",onClick:function(){return b.apply(this,arguments)}},"\u0412\u043e\u0439\u0442\u0438"),l.a.createElement(i.b,{to:"/register",className:"form-button"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))));function b(){return(b=Object(O.a)(C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.login(n,m);case 3:e.history.replace("/cart"),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),"auth/invalid-email"===t.t0.code&&p("form alert");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))).apply(this,arguments)}}))),$=Object(g.f)((function(e){var t=Object(r.useState)(""),a=Object(s.a)(t,2),n=a[0],c=a[1],u=Object(r.useState)(""),o=Object(s.a)(u,2),m=o[0],d=o[1],f=Object(r.useState)(""),h=Object(s.a)(f,2),E=h[0],p=h[1];return l.a.createElement("div",{className:"login-page"},l.a.createElement("h2",{className:"form-header"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),l.a.createElement("form",{className:"form",onSubmit:function(e){return e.preventDefault()&&!1}},l.a.createElement("label",{className:"form-field"},l.a.createElement("div",null,"\u0418\u043c\u044f"),l.a.createElement("input",{id:"name",name:"name",autoComplete:"off",autoFocus:!0,value:n,onChange:function(e){return c(e.target.value)}})),l.a.createElement("label",{className:"form-field"},l.a.createElement("div",null,"E-mail"),l.a.createElement("input",{id:"e-mail",name:"e-mail",autoComplete:"off",value:E,onChange:function(e){return p(e.target.value)}})),l.a.createElement("label",{className:"form-field"},l.a.createElement("div",null,"\u041f\u0430\u0440\u043e\u043b\u044c"),l.a.createElement("input",{id:"password",name:"password",autoComplete:"off",value:m,onChange:function(e){return d(e.target.value)}})),l.a.createElement("div",{className:"form-field"},l.a.createElement("button",{className:"form-button",type:"submit",onClick:function(){return b.apply(this,arguments)}},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"),l.a.createElement(i.b,{to:"/login",className:"form-button"},"\u0412\u043e\u0439\u0442\u0438"))));function b(){return(b=Object(O.a)(C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.register(n,E,m);case 3:e.history.replace("/cart"),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),alert(t.t0.message);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))).apply(this,arguments)}})),ee=function(){return l.a.createElement("h2",null,"\u0417\u0430\u043a\u0430\u0437 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d")},te=function(e){Object(f.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).onDelete=function(t){k.removeOrder(t).then((function(){return k.getOrders().then((function(t){return e.setState({orders:t})}))}))},e.state={orders:[]},e.renderItems=function(e){var t=e.id*e.width*e.height*e.price*Math.floor(1e3*Math.random());return l.a.createElement("table",{key:t+1},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),l.a.createElement("th",null,"\u0428\u0438\u0440\u0438\u043d\u0430"),l.a.createElement("th",null,"\u0412\u044b\u0441\u043e\u0442\u0430"),l.a.createElement("th",null,"\u041a\u043e\u043b\u0438\u0447\u0435\u0442\u0432\u043e"),l.a.createElement("th",null,"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c"))),l.a.createElement("tbody",null,l.a.createElement("tr",{key:t},l.a.createElement("td",null,e.name),l.a.createElement("td",null,e.width),l.a.createElement("td",null,e.height),l.a.createElement("td",null,e.count),l.a.createElement("td",null,e.total))))},e.renderRow=function(t){var a=t.key,n=t.name,r=t.email,c=t.order,u=t.total;return l.a.createElement("tr",{key:a},l.a.createElement("td",null,n),l.a.createElement("td",null,r),l.a.createElement("td",null,c.map(e.renderItems)),l.a.createElement("td",null,u),l.a.createElement("td",null,l.a.createElement("button",{onClick:function(){return e.onDelete(a)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;k.getOrders().then((function(t){return e.setState({orders:t})}))}},{key:"render",value:function(){var e=this.state.orders;return"yt22jtNlWVhf0sWJcAR3ElKHcst2"===k.getCurrentUserUid()?l.a.createElement("table",{className:"table table-responsive-sm"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"\u0418\u043c\u044f"),l.a.createElement("th",null,"E-mail"),l.a.createElement("th",null,"\u0417\u0430\u043a\u0430\u0437"),l.a.createElement("th",null,"\u0421\u0443\u043c\u043c\u0430"))),l.a.createElement("tbody",null,e.map(this.renderRow))):l.a.createElement(i.b,{to:"login",className:"btn btn-primary btn-large"},"\u0417\u0430\u043b\u043e\u0433\u0438\u043d\u0438\u0442\u044c\u0441\u044f")}}]),a}(r.Component),ae=(a(60),Object(g.f)((function(e){var t=e.numItems,a=e.total;return k.getCurrentUsername()?"yt22jtNlWVhf0sWJcAR3ElKHcst2"===k.getCurrentUserUid()?l.a.createElement("header",{className:"shop-header row"},l.a.createElement(i.b,{className:"logo text-dark",to:"/re-store"},"ReStore"),l.a.createElement(i.b,{to:"/cart",className:"shopping-cart"},l.a.createElement("i",{className:"cart-icon fa fa-shopping-cart"}),t," \u041f\u0440\u0435\u0434\u043c\u0435\u0442\u043e\u0432 (",a," \u0420.)"),l.a.createElement("div",{className:"additional-pages"},l.a.createElement(i.b,{to:"/orders"},"\u0417\u0430\u043a\u0430\u0437\u044b"),l.a.createElement("button",{className:"logout",onClick:n,type:"submit"},"\u0412\u044b\u0439\u0442\u0438"))):l.a.createElement("header",{className:"shop-header row"},l.a.createElement(i.b,{className:"logo text-dark",to:"/re-store"},"ReStore"),l.a.createElement(i.b,{to:"/cart",className:"shopping-cart"},l.a.createElement("i",{className:"cart-icon fa fa-shopping-cart"}),t," \u041f\u0440\u0435\u0434\u043c\u0435\u0442\u043e\u0432 (",a," \u0420.)"),l.a.createElement("div",{className:"additional-pages"},l.a.createElement("button",{className:"logout",onClick:n,type:"submit"},"\u0412\u044b\u0439\u0442\u0438"))):l.a.createElement("header",{className:"shop-header row"},l.a.createElement(i.b,{className:"logo text-dark",to:"/re-store"},"ReStore"),l.a.createElement(i.b,{to:"/cart",className:"shopping-cart"},l.a.createElement("i",{className:"cart-icon fa fa-shopping-cart"}),t," \u041f\u0440\u0435\u0434\u043c\u0435\u0442\u043e\u0432 (",a," \u0420.)"),l.a.createElement("div",{className:"additional-pages"},l.a.createElement(i.b,{to:"/login"},"\u0412\u043e\u0439\u0442\u0438"),l.a.createElement(i.b,{to:"/register"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")));function n(){return r.apply(this,arguments)}function r(){return(r=Object(O.a)(C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.logout();case 2:e.history.push("/re-store");case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}))),ne=Object(o.b)((function(e){var t=e.shoppingCart;return{orderTotal:t.orderTotal,cartItemsTotal:t.cartItemsTotal}}))((function(e){var t=e.orderTotal,a=e.cartItemsTotal,n=Object(r.useState)(!1),c=Object(s.a)(n,2),u=c[0],o=c[1];return Object(r.useEffect)((function(){k.isInitialized().then((function(e){o(e)}))})),!1!==u?l.a.createElement("main",{role:"main",className:"container"},l.a.createElement(ae,{numItems:a,total:t}),l.a.createElement(v,null,l.a.createElement(g.c,null,l.a.createElement(g.a,{path:"/re-store",component:B,exact:!0}),l.a.createElement(g.a,{path:"/cart",component:Y}),l.a.createElement(g.a,{path:"/login",component:Z}),l.a.createElement(g.a,{path:"/register",component:$}),l.a.createElement(g.a,{path:"/success",component:ee}),l.a.createElement(g.a,{path:"/orders",component:te})))):l.a.createElement(K,null)})),re=function(){function e(){Object(m.a)(this,e)}return Object(d.a)(e,[{key:"getFrames",value:function(){return k.getFrames()}}]),e}(),le=a(12),ce=a(23),ue=function(e,t){if(void 0===e)return{frames:[],loading:!0,error:null};var a=t.payload,n=e.frameList.frames.findIndex((function(e){return e.id===a})),r=e.frameList.frames[n],l=t.height,c=t.width;switch(t.type){case"FETCH_FRAMES_REQUEST":return{frames:[],loading:!0,error:null};case"FETCH_FRAMES_SUCCESS":return{frames:t.payload,loading:!1,error:null};case"FETCH_FRAMES_FAILURE":return{frames:[],loading:!1,error:t.payload};case"HEIGHT_UPDATE":var u=Object(ce.a)({},r,{height:l,id:r.id+1e3});return{frames:[].concat(Object(le.a)(e.frameList.frames.slice(0,n)),[u],Object(le.a)(e.frameList.frames.slice(n+1)))};case"WIDTH_UPDATE":var o=Object(ce.a)({},r,{width:c,id:r.id+1e3});return{frames:[].concat(Object(le.a)(e.frameList.frames.slice(0,n)),[o],Object(le.a)(e.frameList.frames.slice(n+1)))};default:return e.frameList}},oe=function(e,t,a){var n=e.frameList.frames,r=e.shoppingCart.cartItems,l=n.find((function(e){return e.id===t})),c=r.findIndex((function(e){return e.id===t})),u=function(e,t,a){return 0===t.count?[].concat(Object(le.a)(e.slice(0,a)),Object(le.a)(e.slice(a+1))):-1===a?[].concat(Object(le.a)(e),[t]):[].concat(Object(le.a)(e.slice(0,a)),[t],Object(le.a)(e.slice(a+1)))}(r,function(e,t,a){return t?Object(ce.a)({},t,{count:t.count+a,total:t.total+a*Math.round(t.width*t.height*t.price/100)}):{id:e.id,name:e.name,count:1,width:e.width,height:e.height,total:Math.round(e.width*e.height*e.price/100),price:e.price}}(l,r[c],a),c);return{orderTotal:Object.values(u).reduce((function(e,t){return e+t.total}),0),cartItems:u,cartItemsTotal:Object.values(u).reduce((function(e,t){return e+t.count}),0)}},ie=function(e,t){if(void 0===e)return{cartItems:[],orderTotal:0,cartItemsTotal:0};switch(t.type){case"FRAME_ADDED_TO_CART":return oe(e,t.payload,1);case"FRAME_DELETED_FROM_CART":return oe(e,t.payload,-1);case"ALL_FRAMES_DELETED_FROM_CART":var a=e.shoppingCart.cartItems.find((function(e){return e.id===t.payload}));return oe(e,t.payload,-a.count);case"CLEAR_CART":return{orderTotal:0,cartItems:[],cartItemsTotal:0};default:return e.shoppingCart}},se=function(e,t){return{frameList:ue(e,t),shoppingCart:ie(e,t)}},me=Object(J.b)(se),de=new re;u.a.render(l.a.createElement(o.a,{store:me},l.a.createElement(v,null,l.a.createElement(R,{value:de},l.a.createElement(i.a,null,l.a.createElement(ne,null))))),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.56866b4b.chunk.js.map